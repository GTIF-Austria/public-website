const ts=s=>{let n;if(typeof s=="string"){const r=i=>i.querySelector(s);if(n=r(document),!n){const i=document.querySelectorAll("html *");for(let t=0;t<i.length&&!(i[t].shadowRoot&&(n=r(i[t].shadowRoot),n));t++);}}else n=s;return n},W={PROPERTYCHANGE:"propertychange"},G={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class U{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function os(s,n,r){let i,t;r=r||C;let o=0,u=s.length,e=!1;for(;o<u;)i=o+(u-o>>1),t=+r(s[i],n),t<0?o=i+1:(u=i,e=!t);return e?o:~o}function C(s,n){return s>n?1:s<n?-1:0}function es(s,n){return s<n?1:s>n?-1:0}function as(s,n,r){if(s[0]<=n)return 0;const i=s.length;if(n<=s[i-1])return i-1;if(typeof r=="function"){for(let t=1;t<i;++t){const o=s[t];if(o===n)return t;if(o<n)return r(n,s[t-1],o)>0?t-1:t}return i-1}if(r>0){for(let t=1;t<i;++t)if(s[t]<n)return t-1;return i-1}if(r<0){for(let t=1;t<i;++t)if(s[t]<=n)return t;return i-1}for(let t=1;t<i;++t){if(s[t]==n)return t;if(s[t]<n)return s[t-1]-n<n-s[t]?t-1:t}return i-1}function us(s,n,r){for(;n<r;){const i=s[n];s[n]=s[r],s[r]=i,++n,--r}}function ls(s,n){const r=Array.isArray(n)?n:[n],i=r.length;for(let t=0;t<i;t++)s[s.length]=r[t]}function V(s,n){const r=s.length;if(r!==n.length)return!1;for(let i=0;i<r;i++)if(s[i]!==n[i])return!1;return!0}function cs(s,n,r){const i=n||C;return s.every(function(t,o){if(o===0)return!0;const u=i(s[o-1],t);return!(u>0||u===0)})}function fs(){return!0}function hs(){return!1}function O(){}function ps(s){let n,r,i;return function(){const t=Array.prototype.slice.call(arguments);return(!r||this!==i||!V(t,r))&&(i=this,r=t,n=s.apply(this,arguments)),n}}function ds(s){function n(){let r;try{r=s()}catch(i){return Promise.reject(i)}return r instanceof Promise?r:Promise.resolve(r)}return n()}function S(s){for(const n in s)delete s[n]}function H(s){let n;for(n in s)return!1;return!n}class N{constructor(n){this.propagationStopped,this.defaultPrevented,this.type=n,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function gs(s){s.stopPropagation()}class K extends U{constructor(n){super(),this.eventTarget_=n,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(n,r){if(!n||!r)return;const i=this.listeners_||(this.listeners_={}),t=i[n]||(i[n]=[]);t.includes(r)||t.push(r)}dispatchEvent(n){const r=typeof n=="string",i=r?n:n.type,t=this.listeners_&&this.listeners_[i];if(!t)return;const o=r?new N(n):n;o.target||(o.target=this.eventTarget_||this);const u=this.dispatching_||(this.dispatching_={}),e=this.pendingRemovals_||(this.pendingRemovals_={});i in u||(u[i]=0,e[i]=0),++u[i];let a;for(let l=0,h=t.length;l<h;++l)if("handleEvent"in t[l]?a=t[l].handleEvent(o):a=t[l].call(this,o),a===!1||o.propagationStopped){a=!1;break}if(--u[i]===0){let l=e[i];for(delete e[i];l--;)this.removeEventListener(i,O);delete u[i]}return a}disposeInternal(){this.listeners_&&S(this.listeners_)}getListeners(n){return this.listeners_&&this.listeners_[n]||void 0}hasListener(n){return this.listeners_?n?n in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(n,r){if(!this.listeners_)return;const i=this.listeners_[n];if(!i)return;const t=i.indexOf(r);t!==-1&&(this.pendingRemovals_&&n in this.pendingRemovals_?(i[t]=O,++this.pendingRemovals_[n]):(i.splice(t,1),i.length===0&&delete this.listeners_[n]))}}function R(s,n,r,i,t){if(t){const u=r;r=function(e){return s.removeEventListener(n,r),u.call(i??this,e)}}else i&&i!==s&&(r=r.bind(i));const o={target:s,type:n,listener:r};return s.addEventListener(n,r),o}function L(s,n,r,i){return R(s,n,r,i,!0)}function T(s){s&&s.target&&(s.target.removeEventListener(s.type,s.listener),S(s))}class _ extends K{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(G.CHANGE)}getRevision(){return this.revision_}onInternal(n,r){if(Array.isArray(n)){const i=n.length,t=new Array(i);for(let o=0;o<i;++o)t[o]=R(this,n[o],r);return t}return R(this,n,r)}onceInternal(n,r){let i;if(Array.isArray(n)){const t=n.length;i=new Array(t);for(let o=0;o<t;++o)i[o]=L(this,n[o],r)}else i=L(this,n,r);return r.ol_key=i,i}unInternal(n,r){const i=r.ol_key;if(i)D(i);else if(Array.isArray(n))for(let t=0,o=n.length;t<o;++t)this.removeEventListener(n[t],r);else this.removeEventListener(n,r)}}_.prototype.on;_.prototype.once;_.prototype.un;function D(s){if(Array.isArray(s))for(let n=0,r=s.length;n<r;++n)T(s[n]);else T(s)}function Es(){throw new Error("Unimplemented abstract method.")}let q=0;function j(s){return s.ol_uid||(s.ol_uid=String(++q))}class M extends N{constructor(n,r,i){super(n),this.key=r,this.oldValue=i}}class vs extends _{constructor(n){super(),this.on,this.once,this.un,j(this),this.values_=null,n!==void 0&&this.setProperties(n)}get(n){let r;return this.values_&&this.values_.hasOwnProperty(n)&&(r=this.values_[n]),r}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(n,r){let i;i=`change:${n}`,this.hasListener(i)&&this.dispatchEvent(new M(i,n,r)),i=W.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new M(i,n,r))}addChangeListener(n,r){this.addEventListener(`change:${n}`,r)}removeChangeListener(n,r){this.removeEventListener(`change:${n}`,r)}set(n,r,i){const t=this.values_||(this.values_={});if(i)t[n]=r;else{const o=t[n];t[n]=r,o!==r&&this.notify(n,o)}}setProperties(n,r){for(const i in n)this.set(i,n[i],r)}applyProperties(n){n.values_&&Object.assign(this.values_||(this.values_={}),n.values_)}unset(n,r){if(this.values_&&n in this.values_){const i=this.values_[n];delete this.values_[n],H(this.values_)&&(this.values_=null),r||this.notify(n,i)}}}function ms(s,n){if(!s)throw new Error(n)}function _s(s,n,r){return Math.min(Math.max(s,n),r)}function ys(s,n,r,i,t,o){const u=t-r,e=o-i;if(u!==0||e!==0){const a=((s-r)*u+(n-i)*e)/(u*u+e*e);a>1?(r=t,i=o):a>0&&(r+=u*a,i+=e*a)}return $(s,n,r,i)}function $(s,n,r,i){const t=r-s,o=i-n;return t*t+o*o}function Rs(s){const n=s.length;for(let i=0;i<n;i++){let t=i,o=Math.abs(s[i][i]);for(let e=i+1;e<n;e++){const a=Math.abs(s[e][i]);a>o&&(o=a,t=e)}if(o===0)return null;const u=s[t];s[t]=s[i],s[i]=u;for(let e=i+1;e<n;e++){const a=-s[e][i]/s[i][i];for(let l=i;l<n+1;l++)i==l?s[e][l]=0:s[e][l]+=a*s[i][l]}}const r=new Array(n);for(let i=n-1;i>=0;i--){r[i]=s[i][n]/s[i][i];for(let t=i-1;t>=0;t--)s[t][n]-=s[t][i]*r[i]}return r}function Is(s){return s*180/Math.PI}function ws(s){return s*Math.PI/180}function Os(s,n){const r=s%n;return r*n<0?r+n:r}function Ls(s,n,r){return s+r*(n-s)}function I(s,n){const r=Math.pow(10,n);return Math.round(s*r)/r}function Ts(s,n){return Math.round(I(s,n))}function Ms(s,n){return Math.floor(I(s,n))}function As(s,n){return Math.ceil(I(s,n))}function Cs(s,n,r){if(s>=n&&s<r)return s;const i=r-n;return((s-n)%i+i)%i+n}const c={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ss(s){const n=P();for(let r=0,i=s.length;r<i;++r)J(n,s[r]);return n}function z(s,n,r){const i=Math.min.apply(null,s),t=Math.min.apply(null,n),o=Math.max.apply(null,s),u=Math.max.apply(null,n);return y(i,t,o,u,r)}function Ns(s,n,r){return r?(r[0]=s[0]-n,r[1]=s[1]-n,r[2]=s[2]+n,r[3]=s[3]+n,r):[s[0]-n,s[1]-n,s[2]+n,s[3]+n]}function Ps(s,n){return n?(n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n):s.slice()}function bs(s,n,r){let i,t;return n<s[0]?i=s[0]-n:s[2]<n?i=n-s[2]:i=0,r<s[1]?t=s[1]-r:s[3]<r?t=r-s[3]:t=0,i*i+t*t}function Fs(s,n){return Q(s,n[0],n[1])}function Xs(s,n){return s[0]<=n[0]&&n[2]<=s[2]&&s[1]<=n[1]&&n[3]<=s[3]}function Q(s,n,r){return s[0]<=n&&n<=s[2]&&s[1]<=r&&r<=s[3]}function A(s,n){const r=s[0],i=s[1],t=s[2],o=s[3],u=n[0],e=n[1];let a=c.UNKNOWN;return u<r?a=a|c.LEFT:u>t&&(a=a|c.RIGHT),e<i?a=a|c.BELOW:e>o&&(a=a|c.ABOVE),a===c.UNKNOWN&&(a=c.INTERSECTING),a}function P(){return[1/0,1/0,-1/0,-1/0]}function y(s,n,r,i,t){return t?(t[0]=s,t[1]=n,t[2]=r,t[3]=i,t):[s,n,r,i]}function w(s){return y(1/0,1/0,-1/0,-1/0,s)}function Bs(s,n){const r=s[0],i=s[1];return y(r,i,r,i,n)}function Ys(s,n,r,i,t){const o=w(t);return Z(o,s,n,r,i)}function Ws(s,n){return s[0]==n[0]&&s[2]==n[2]&&s[1]==n[1]&&s[3]==n[3]}function Gs(s,n,r){return Math.abs(s[0]-n[0])<r&&Math.abs(s[2]-n[2])<r&&Math.abs(s[1]-n[1])<r&&Math.abs(s[3]-n[3])<r}function Us(s,n){return n[0]<s[0]&&(s[0]=n[0]),n[2]>s[2]&&(s[2]=n[2]),n[1]<s[1]&&(s[1]=n[1]),n[3]>s[3]&&(s[3]=n[3]),s}function J(s,n){n[0]<s[0]&&(s[0]=n[0]),n[0]>s[2]&&(s[2]=n[0]),n[1]<s[1]&&(s[1]=n[1]),n[1]>s[3]&&(s[3]=n[1])}function Z(s,n,r,i,t){for(;r<i;r+=t)k(s,n[r],n[r+1]);return s}function k(s,n,r){s[0]=Math.min(s[0],n),s[1]=Math.min(s[1],r),s[2]=Math.max(s[2],n),s[3]=Math.max(s[3],r)}function Vs(s,n){let r;return r=n(b(s)),r||(r=n(F(s)),r)||(r=n(B(s)),r)||(r=n(X(s)),r)?r:!1}function Hs(s){let n=0;return Y(s)||(n=m(s)*ns(s)),n}function b(s){return[s[0],s[1]]}function F(s){return[s[2],s[1]]}function x(s){return[(s[0]+s[2])/2,(s[1]+s[3])/2]}function Ks(s,n){let r;if(n==="bottom-left")r=b(s);else if(n==="bottom-right")r=F(s);else if(n==="top-left")r=X(s);else if(n==="top-right")r=B(s);else throw new Error("Invalid corner");return r}function Ds(s,n,r,i,t){const[o,u,e,a,l,h,d,f]=ss(s,n,r,i);return y(Math.min(o,e,l,d),Math.min(u,a,h,f),Math.max(o,e,l,d),Math.max(u,a,h,f),t)}function ss(s,n,r,i){const t=n*i[0]/2,o=n*i[1]/2,u=Math.cos(r),e=Math.sin(r),a=t*u,l=t*e,h=o*u,d=o*e,f=s[0],p=s[1];return[f-a+d,p-l-h,f-a-d,p-l+h,f+a-d,p+l+h,f+a+d,p+l-h,f-a+d,p-l-h]}function ns(s){return s[3]-s[1]}function qs(s,n,r){const i=r||P();return is(s,n)?(s[0]>n[0]?i[0]=s[0]:i[0]=n[0],s[1]>n[1]?i[1]=s[1]:i[1]=n[1],s[2]<n[2]?i[2]=s[2]:i[2]=n[2],s[3]<n[3]?i[3]=s[3]:i[3]=n[3]):w(i),i}function X(s){return[s[0],s[3]]}function B(s){return[s[2],s[3]]}function m(s){return s[2]-s[0]}function is(s,n){return s[0]<=n[2]&&s[2]>=n[0]&&s[1]<=n[3]&&s[3]>=n[1]}function Y(s){return s[2]<s[0]||s[3]<s[1]}function js(s,n){return n?(n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n):s}function $s(s,n){const r=(s[2]-s[0])/2*(n-1),i=(s[3]-s[1])/2*(n-1);s[0]-=r,s[2]+=r,s[1]-=i,s[3]+=i}function zs(s,n,r){let i=!1;const t=A(s,n),o=A(s,r);if(t===c.INTERSECTING||o===c.INTERSECTING)i=!0;else{const u=s[0],e=s[1],a=s[2],l=s[3],h=n[0],d=n[1],f=r[0],p=r[1],v=(p-d)/(f-h);let g,E;o&c.ABOVE&&!(t&c.ABOVE)&&(g=f-(p-l)/v,i=g>=u&&g<=a),!i&&o&c.RIGHT&&!(t&c.RIGHT)&&(E=p-(f-a)*v,i=E>=e&&E<=l),!i&&o&c.BELOW&&!(t&c.BELOW)&&(g=f-(p-e)/v,i=g>=u&&g<=a),!i&&o&c.LEFT&&!(t&c.LEFT)&&(E=p-(f-u)*v,i=E>=e&&E<=l)}return i}function Qs(s,n,r,i){if(Y(s))return w(r);let t=[];if(i>1){const e=s[2]-s[0],a=s[3]-s[1];for(let l=0;l<i;++l)t.push(s[0]+e*l/i,s[1],s[2],s[1]+a*l/i,s[2]-e*l/i,s[3],s[0],s[3]-a*l/i)}else t=[s[0],s[1],s[2],s[1],s[2],s[3],s[0],s[3]];n(t,t,2);const o=[],u=[];for(let e=0,a=t.length;e<a;e+=2)o.push(t[e]),u.push(t[e+1]);return z(o,u,r)}function rs(s,n){const r=n.getExtent(),i=x(s);if(n.canWrapX()&&(i[0]<r[0]||i[0]>=r[2])){const t=m(r),u=Math.floor((i[0]-r[0])/t)*t;s[0]-=u,s[2]-=u}return s}function Js(s,n,r){if(n.canWrapX()){const i=n.getExtent();if(!isFinite(s[0])||!isFinite(s[2]))return[[i[0],s[1],i[2],s[3]]];rs(s,n);const t=m(i);if(m(s)>t&&!r)return[[i[0],s[1],i[2],s[3]]];if(s[0]<i[0])return[[s[0]+t,s[1],i[2],s[3]],[i[0],s[1],s[2],s[3]]];if(s[2]>i[2])return[[s[0],s[1],i[2],s[3]],[i[0],s[1],s[2]-t,s[3]]]}return[s]}export{I as $,R as A,Ns as B,T as C,U as D,G as E,$s as F,ns as G,N as H,Us as I,X as J,Hs as K,Js as L,ds as M,b as N,B as O,Ts as P,Os as Q,L as R,Bs as S,K as T,as as U,ws as V,vs as W,Ds as X,O as Y,fs as Z,hs as _,y as a,C as a0,W as a1,w as a2,Ps as a3,Vs as a4,A as a5,c as a6,us as a7,Ls as a8,J as a9,_ as aa,F as ab,$ as ac,Rs as ad,As as ae,Ms as af,cs as ag,Ks as ah,gs as ai,Is as aj,Cs as ak,ps as al,js as am,Ys as an,bs as ao,Q as ap,Z as aq,zs as ar,os as as,ms as b,Xs as c,Es as d,ls as e,Ss as f,ts as g,Gs as h,H as i,qs as j,Ws as k,Y as l,x as m,is as n,m as o,_s as p,Qs as q,Fs as r,ys as s,j as t,S as u,ss as v,rs as w,es as x,V as y,P as z};
